---
name: AGI Kernel v0.5.0
description: è‡ªå·±æ”¹å–„ãƒ«ãƒ¼ãƒ—ï¼ˆAGIã‚«ãƒ¼ãƒãƒ«ï¼‰â€” ãƒªãƒã‚¸ãƒˆãƒªã‚¹ã‚­ãƒ£ãƒ³ãƒ»ã‚¿ã‚¹ã‚¯ç”Ÿæˆãƒ»çŠ¶æ…‹ç®¡ç†ãƒ»å­¦ç¿’è¨˜éŒ²
---

# AGI Kernel v0.4.0 (`/agi_kernel`)

**ãƒªãƒã‚¸ãƒˆãƒªã®å¥å…¨æ€§ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã€æ”¹å–„ã‚¿ã‚¹ã‚¯ã‚’1ã¤ãšã¤å‡¦ç†ã™ã‚‹è‡ªå·±æ”¹å–„ãƒ«ãƒ¼ãƒ—ã€‚**
çŠ¶æ…‹ã‚’ä¿å­˜ã—ã€ä¸­æ–­ã—ã¦ã‚‚å†é–‹ã§ãã‚‹ã€‚

> [!CAUTION]
> **å¿…é ˆ**: ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¨åŒãƒ•ã‚©ãƒ«ãƒ€ã®`SKILL.md`ã‚’èª­ã‚“ã§ã‹ã‚‰å®Ÿè¡Œ

## ğŸ“‹ Protocol: 8-Phase Self-Improvement Loop

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. BOOT ğŸ”§                                                 â”‚
â”‚     â†’ state.json èª­è¾¼ï¼ˆ--resumeæ™‚ï¼‰ã€åˆæœŸåŒ–                 â”‚
â”‚     â†“                                                       â”‚
â”‚  2. SCAN ğŸ”                                                 â”‚
â”‚     â†’ workflow_lint, pytest å®Ÿè¡Œã€çµæœåé›†                   â”‚
â”‚     â†“                                                       â”‚
â”‚  3. SENSE ğŸ“Š                                                â”‚
â”‚     â†’ ã‚¹ã‚­ãƒ£ãƒ³çµæœã‹ã‚‰ã‚¿ã‚¹ã‚¯å€™è£œã‚’ç”Ÿæˆ                       â”‚
â”‚     â†’ candidates.json ã«å‡ºåŠ›                                â”‚
â”‚     â†“                                                       â”‚
â”‚  4. SELECT ğŸ¯                                               â”‚
â”‚     â†’ å„ªå…ˆåº¦ã§ã‚½ãƒ¼ãƒˆã€PAUSEDã‚’é™¤å¤–ã€1ã¤ã ã‘é¸æŠ             â”‚
â”‚     â†“                                                       â”‚
â”‚  5. EXECUTE âœï¸ (dry-runæ™‚ã‚¹ã‚­ãƒƒãƒ—)                           â”‚
â”‚     â†’ é¸æŠã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ                                      â”‚
â”‚     â†“                                                       â”‚
â”‚  6. VERIFY âœ… (dry-runæ™‚ã‚¹ã‚­ãƒƒãƒ—)                            â”‚
â”‚     â†’ å®Ÿè¡Œçµæœã‚’æ¤œè¨¼                                        â”‚
â”‚     â†“                                                       â”‚
â”‚  7. LEARN ğŸ“                                                â”‚
â”‚     â†’ KI Learningã«çµæœè¨˜éŒ²ï¼ˆæˆåŠŸ/å¤±æ•—/éƒ¨åˆ†æˆåŠŸï¼‰           â”‚
â”‚     â†“                                                       â”‚
â”‚  8. CHECKPOINT ğŸ’¾                                           â”‚
â”‚     â†’ state.json ä¿å­˜ã€ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ

### åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰

```powershell
# ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
python "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ/AGIã‚«ãƒ¼ãƒãƒ«/scripts/agi_kernel.py" --help

# 1ã‚µã‚¤ã‚¯ãƒ«å®Ÿè¡Œï¼ˆdry-run: EXECUTE/VERIFYã‚¹ã‚­ãƒƒãƒ—ï¼‰
python "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ/AGIã‚«ãƒ¼ãƒãƒ«/scripts/agi_kernel.py" --once --dry-run

# 1ã‚µã‚¤ã‚¯ãƒ«å®Ÿè¡Œï¼ˆæœ¬ç•ªï¼‰
python "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ/AGIã‚«ãƒ¼ãƒãƒ«/scripts/agi_kernel.py" --once

# ä¸­æ–­ã‹ã‚‰ã®å†é–‹ï¼ˆdry-runï¼‰
python "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ/AGIã‚«ãƒ¼ãƒãƒ«/scripts/agi_kernel.py" --resume --dry-run
```

### CLIãƒ•ãƒ©ã‚°

| ãƒ•ãƒ©ã‚° | èª¬æ˜ |
|:-------|:-----|
| `--once` | 1ã‚µã‚¤ã‚¯ãƒ«ã®ã¿å®Ÿè¡Œã—ã¦çµ‚äº† |
| `--resume` | state.jsonã‹ã‚‰å†é–‹ |
| `--dry-run` | EXECUTE/VERIFYãƒ•ã‚§ãƒ¼ã‚ºã‚’ã‚¹ã‚­ãƒƒãƒ— |
| `--workspace` | ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ«ãƒ¼ãƒˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `.`ï¼‰ |

## ğŸ“‚ å‡ºåŠ›å…ˆ

| ãƒ‘ã‚¹ | å†…å®¹ |
|:-----|:-----|
| `_outputs/agi_kernel/state.json` | æœ€æ–°çŠ¶æ…‹ |
| `_outputs/agi_kernel/state.json.bak` | ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— |
| `_outputs/agi_kernel/lock` | å¤šé‡èµ·å‹•é˜²æ­¢ãƒ­ãƒƒã‚¯ |
| `_outputs/agi_kernel/{YYYYMMDD}/{cycle_id}/candidates.json` | ã‚¿ã‚¹ã‚¯å€™è£œ |
| `_outputs/agi_kernel/{YYYYMMDD}/{cycle_id}/report.json` | ã‚µã‚¤ã‚¯ãƒ«ãƒ¬ãƒãƒ¼ãƒˆ |
| `_outputs/agi_kernel/{YYYYMMDD}/latest_candidates.json` | æœ€æ–°å€™è£œï¼ˆã‚³ãƒ”ãƒ¼ï¼‰ |
| `_outputs/agi_kernel/{YYYYMMDD}/latest_report.json` | æœ€æ–°ãƒ¬ãƒãƒ¼ãƒˆï¼ˆã‚³ãƒ”ãƒ¼ï¼‰ |

## ğŸ”„ Phaseè©³ç´°ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 1: BOOT
```
â–¡ CLIå¼•æ•°ã‚’ãƒ‘ãƒ¼ã‚¹
â–¡ --resume ãªã‚‰ state.json ã‚’èª­è¾¼ï¼ˆlast_completed_phase ã®æ¬¡ã‹ã‚‰å†é–‹ï¼‰
â–¡ cycle_id ã‚’ç”Ÿæˆï¼ˆYYYYMMDD_HHMMSSï¼‰
â–¡ WorkflowLogger é–‹å§‹
```

### Phase 2: SCAN
```
â–¡ python tools/workflow_lint.py ã‚’å®Ÿè¡Œ
â–¡ python -m pytest -q ã‚’å®Ÿè¡Œ
â–¡ çµæœã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ scan_results ã«æ ¼ç´
```

### Phase 3: SENSE
```
â–¡ scan_results ã‹ã‚‰ã‚¿ã‚¹ã‚¯å€™è£œã‚’ç”Ÿæˆ
â–¡ å„ªå…ˆåº¦ä»˜ä¸ï¼ˆworkflow_lint > pytest > hygieneï¼‰
â–¡ candidates.json ã«ä¿å­˜
```

### Phase 4: SELECT
```
â–¡ paused_tasks ã«å«ã¾ã‚Œã‚‹ã‚¿ã‚¹ã‚¯ã‚’é™¤å¤–
â–¡ å„ªå…ˆåº¦é †ã«ã‚½ãƒ¼ãƒˆ
â–¡ å…ˆé ­ã®1ã¤ã ã‘ selected_task ã«è¨­å®š
â–¡ å€™è£œãªã—ã®å ´åˆ: status=COMPLETED ã§æ—©æœŸçµ‚äº†
```

### Phase 5: EXECUTE (dry-runæ™‚ã‚¹ã‚­ãƒƒãƒ—)
```
â–¡ _preflight_check: gitåˆ©ç”¨å¯èƒ½æ€§ + ä½œæ¥­ãƒ„ãƒªãƒ¼ã‚¯ãƒªãƒ¼ãƒ³ç¢ºèª
  - dirty_worktree â†’ EXECUTEä¸­æ­¢ãƒ»FAILUREæ‰±ã„
  - gitä¸åœ¨ â†’ difflibãƒ™ãƒ¼ã‚¹ã§å®‰å…¨å¼é©ç”¨ï¼ˆç¶šè¡Œï¼‰
â–¡ GeminiExecutor ã§ãƒ‘ãƒƒãƒç”Ÿæˆï¼ˆgemini-2.5-flash / gemini-2.5-proï¼‰
â–¡ _validate_patch_result ã§ãƒ‘ã‚¹å®‰å…¨æ¤œè¨¼ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«æ•°åˆ¶é™
â–¡ _backup_targets ã§ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆï¼ˆå¾©å…ƒç”¨ï¼‰
â–¡ _apply_patch ã§ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿
â–¡ _compute_patch_diff_lines ã§å·®åˆ†è¡Œæ•°ãƒã‚§ãƒƒã‚¯ï¼ˆdifflib/gitéä¾å­˜ã€200è¡Œè¶…éâ†’ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
â–¡ LLMãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å¤±æ•—æ™‚ã¯æœ€å¤§3å›ãƒªãƒˆãƒ©ã‚¤
â–¡ å¤±æ•—æ™‚: _rollback_with_backup ã§ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ
```

### Phase 6: VERIFY (dry-runæ™‚ã‚¹ã‚­ãƒƒãƒ—)
```
â–¡ EXECUTEæˆåŠŸæ™‚ã®ã¿å®Ÿè¡Œï¼ˆå¤±æ•—æ™‚ã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰
â–¡ Verifier ãŒã‚¿ã‚¹ã‚¯ç¨®åˆ¥ã«å¿œã˜ãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ:
  - pytestç³»: python -m pytest -q --tb=short --color=no
  - lintç³»: python tools/workflow_lint.py
â–¡ æˆåŠŸâ†’ verification_result.success=true
  - --auto-commit: git add + git commit ã‚’è‡ªå‹•å®Ÿè¡Œ
  - gitç’°å¢ƒãªã‚‰ã€Œæ‰‹å‹•commitæ¨å¥¨ã€è­¦å‘Šã‚’è¡¨ç¤º
â–¡ å¤±æ•—â†’ _rollback_with_backup ã§ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤äº‹æ•…ãªã—ï¼‰
â–¡ verification_result ã«çµæœã‚’è¨˜éŒ²
```

### Phase 7: LEARN
```
â–¡ KI Learning ã« report_action_outcome ã§è¨˜éŒ²
â–¡ å¤±æ•—æ™‚: failure_log ã«è¿½åŠ 
â–¡ 3å›å¤±æ•—: paused_tasks ã«è¿½åŠ 
```

### Phase 8: CHECKPOINT
```
â–¡ state.json ã‚’ atomic write ã§ä¿å­˜ï¼ˆtmp+fsync+replaceï¼‰
â–¡ state.json.bak ã‚’ä½œæˆ
â–¡ report.json ã‚’å‡ºåŠ›
â–¡ lockfile ã‚’è§£æ”¾
â–¡ WorkflowLogger çµ‚äº†
```

## âš ï¸ å®‰å…¨å¼

- **1ã‚µã‚¤ã‚¯ãƒ«1ã‚¿ã‚¹ã‚¯**: æš´èµ°é˜²æ­¢
- **3å›å¤±æ•— â†’ PAUSED**: ç„¡é™ãƒ«ãƒ¼ãƒ—é˜²æ­¢
- **dry-runãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¨å¥¨**: ç ´å£Šçš„æ“ä½œã¯å®Ÿè¡Œã—ãªã„
- **POLICYå¤±æ•— â†’ å³åœæ­¢**: permission denied ç­‰
- **resumeå®‰å…¨åŒ–**: `last_completed_phase` ã®æ¬¡ã‹ã‚‰å†é–‹ï¼ˆäºŒé‡é©ç”¨é˜²æ­¢ï¼‰

## ğŸ’¡ Rules

- **8-Phaseé †æ¬¡å®Ÿè¡Œ**
- **--once ã‚’æ¨å¥¨**: æœ€åˆã¯1ã‚µã‚¤ã‚¯ãƒ«ãšã¤ç¢ºèª
- **å¤±æ•—/æˆåŠŸã‚’è¨˜éŒ²**ï¼ˆKI Learningé€£æºï¼‰
- **Language**: æ—¥æœ¬èªã§å ±å‘Š
