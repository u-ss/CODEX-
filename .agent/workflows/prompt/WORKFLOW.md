---
name: Prompt Refiner Agent v1.0.0
description: ユーザーの雑な入力をChatGPT向け最適化プロンプトに整形するエージェント
---

# Prompt Refiner Agent v1.0.0 (`/prompt`)

**ユーザーの雑な入力を、ChatGPT向けの最適化プロンプトへ変換する。** 人間向け（Markdown）と実装向け（JSON）の2形式をサポート。

> [!CAUTION]
> **必須**: このファイルと同フォルダの`SKILL.md`を読んでから実行

## 📋 使い方

### 基本コマンド

| 入力 | 出力形式 |
|:-----|:---------|
| `/prompt 雑な入力テキスト` | 人間向け（Markdown） |
| `/prompt --json 雑な入力テキスト` | 実装向け（JSON） |

### 使用例

```
/prompt AIを使って英語を勉強したい
/prompt --json ブログのSEO対策について教えて
/prompt Pythonで画像処理のスクリプトを書きたい
```

## 🔄 ワークフロー

```
ユーザー: /prompt（雑な入力テキスト）
    ↓
Step 1: 形式判定
    ├─ --json あり → 実装向け（JSON形式）
    └─ なし（デフォルト） → 人間向け（Markdown形式）
    ↓
Step 2: 入力解析
    ├─ 目的を1文で特定
    ├─ ジャンル判定（8種: tech/study/writing/business/planning/creative/life/other）
    └─ 前提・制約・成功条件を推定
    ↓
Step 3: 不足情報の処理
    ├─ 明確に足りない情報 → 確認質問（最大5つ）として列挙
    └─ 補完可能な情報 → 仮定として明示
    ↓
Step 4: 完成プロンプト生成
    ├─ 目的・背景/前提・制約・期待出力・評価基準・追加指示を構成
    └─ 曖昧語は具体化（「いい感じ」→ 定義に落とす等）
    ↓
Step 5: 出力
    ├─ 人間向け → SKILL.md「形式A」テンプレートで出力
    └─ JSON → SKILL.md「形式B」スキーマで出力
    ↓
ユーザーに返す
```

## 💡 Antigravityへの指示

1. `/prompt` を受けたら、上記ワークフローに従ってプロンプト整形を実行
2. **完成プロンプトが最重要** — ユーザーがコピペでそのまま使える品質にする
3. 確認質問がある場合でも、必ず暫定の完成プロンプトを出力する
4. 情報が足りない場合は仮定を置いて生成し、仮定を明記する
5. 元の意図を勝手に変えない
6. `--json` 指定時は、コードブロックなし・余計な文章なしで純粋なJSONだけ返す

## 💡 Rules

- **Language**: 日本語で応答
- **デフォルト形式**: 人間向け（`--json` 未指定時）
- **完成プロンプトは必ず生成**: 情報不足でも暫定版を出す
- エラー時はユーザーに原因と対処法を日本語で報告
