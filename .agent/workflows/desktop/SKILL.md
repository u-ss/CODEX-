---
name: Desktop Control v5.2.2
---

# Desktop Control v5.2.2 (`/desktop`)> [!CAUTION]

## ÂΩπÂâ≤Â¢ÉÁïå

- „Åì„ÅÆ SKILL.md „ÅØÊäÄË°ì‰ªïÊßòÔºàÂÖ•Âá∫Âäõ„ÉªÂà§ÂÆöÂü∫Ê∫ñ„ÉªÂÆüË£ÖË©≥Á¥∞Ôºâ„ÅÆÊ≠£Êú¨„ÄÇ
- ÂÆüË°åÊâãÈ†Ü„ÅØÂêå„Éï„Ç©„É´„ÉÄ„ÅÆ WORKFLOW.md „ÇíÂèÇÁÖß„ÄÇ

> **„Åì„ÅÆ„Éï„Ç°„Ç§„É´„ÅÆÂÖ®„É´„Éº„É´„ÅØ‰æãÂ§ñ„Å™„ÅèÂÆà„Çã„Åì„Å®„ÄÇÊäÄË°ìË©≥Á¥∞„ÅØ`README.md`ÂèÇÁÖß„ÄÇ**

## üö® „Çµ„Éñ„Ç≥„Éû„É≥„ÉâÂÆöÁæ©ÔºàÂé≥Ê†ºÔºâ

| „Ç≥„Éû„É≥„Éâ | ÊÑèÂë≥ | ÂÆüË°åÊñπÊ≥ï |
|:---------|:-----|:---------|
| `/desktop-chatgpt` | **„Éñ„É©„Ç¶„Ç∂ÁâàChatGPT„Å®„ÅÆÂØæË©±** | CDPÁµåÁî±„Åßchatgpt.com„ÇíÊìç‰Ωú |

> [!CAUTION]
> **`/desktop-chatgpt`„Å®Ë®Ä„Çè„Çå„Åü„Çâ„ÄÅÂøÖ„Åö„Éñ„É©„Ç¶„Ç∂ÁâàChatGPTÔºàchatgpt.comÔºâ„ÇíÊìç‰Ωú„Åô„Çã„Åì„Å®„ÄÇ**
> - CODEX„ÇÑAPI„Åß„ÅØ„Å™„ÅÑ
> - Playwright„Åß„Éñ„É©„Ç¶„Ç∂„ÇíÊìç‰Ωú
> - Ë©≥Á¥∞„ÅØ‰∏ãË®ò„ÄåChatGPTÈÄ£Êê∫„Äç„Çª„ÇØ„Ç∑„Éß„É≥ÂèÇÁÖß

## ‚õî Á¶ÅÊ≠¢‰∫ãÈ†Ö

| Êìç‰Ωú | Âà§ÂÆö | ÁêÜÁî± |
|------|------|------|
| **browser_subagent** | ‚ùå Á¶ÅÊ≠¢ | BOTÂà§ÂÆö„Åï„Çå„Çã |
| **ÂÆå‰∫ÜÂ†±ÂëäÂâç„Å´Á¢∫Ë™ç„Å™„Åó** | ‚ùå Á¶ÅÊ≠¢ | ÂøÖ„ÅöSS„ÅßÁµêÊûúÁ¢∫Ë™ç„Åó„Å¶„Åã„ÇâÂ†±Âëä |
| **Áõ¥Êé•Êìç‰ΩúÔºàPlanner„Çπ„Ç≠„ÉÉ„ÉóÔºâ** | ‚ùå Á¶ÅÊ≠¢ | Â≠¶Áøí„Åï„Çå„Å™„ÅÑ„ÄÇÂøÖ„ÅöPlannerÁµåÁî±„Åß |


## üì∏ SSÊíÆÂΩ±„É´„Éº„É´Ôºà„Éû„É´„ÉÅ„É¢„Éã„Çø„ÉºÂØæÂøúÔºâ

> [!CAUTION]
> **SS„ÅØÂü∫Êú¨2ÊûöÊíÆ„Çã**ÔºàÂêÑ„É¢„Éã„Çø„Éº1Êûö„Åö„Å§Ôºâ„ÄÇ
> - `mss`„É©„Ç§„Éñ„É©„É™„ÅßÂêÑ„É¢„Éã„Çø„Éº„ÇíÂÄãÂà•„Å´ÊíÆÂΩ±
> - „Éï„Ç°„Ç§„É´Âêç„Åß `monitor_1.png`, `monitor_2.png` „Å®Âå∫Âà•
> - „Å©„Å°„Çâ„Åå„Å©„ÅÆ„É¢„Éã„Çø„Éº„ÅãÂà§Âà•„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åô„Çã„Åì„Å®

```python
# ‰æã: ‰∏°„É¢„Éã„Çø„Éº„ÅÆSS„ÇíÊíÆÂΩ±import mss
with mss.mss() as sct:
    for i, monitor in enumerate(sct.monitors[1:], 1):
        mss.tools.to_png(sct.grab(monitor).rgb, ...)
```

## üìä „É¨„Ç§„É§„ÉºÂÑ™ÂÖàÈ†Ü‰Ωç

| Layer | „ÉÑ„Éº„É´ | ÂÑ™ÂÖàÂ∫¶ |
|:------|:-------|:-------|
| **Layer 2+** | Playwright + CDP | ‚úÖ ÊúÄÂÑ™ÂÖà |
| **Layer 3** | Pywinauto (UIA) | ‚úÖ OK |
| **Layer 1** | PyAutoGUI | ‚ö†Ô∏è ÊúÄÂæå„ÅÆÊâãÊÆµ |
| browser_subagent | - | ‚ùå **Á¶ÅÊ≠¢** |

## ‚ö° Circuit Breaker

- **3ÂõûÂ§±Êïó„ÅßOPEN** ‚Üí 30ÁßíÂæå„Å´HALF_OPEN ‚Üí 1ÂõûÊàêÂäü„ÅßCLOSED
- screen_key„Åß„Çπ„Ç≥„Éº„Éó„ÇíÊ±∫ÂÆö

## üîê ChatGPTÈÄ£Êê∫Ôºà`/desktop-chatgpt`Ôºâ

> üìö **Ë©≥Á¥∞„ÉØ„Éº„ÇØ„Éï„É≠„Éº**: [/desktop-chatgpt](../desktop-chatgpt/SKILL.md) „ÇíÂèÇÁÖß

**Ê¶ÇË¶Å**: „Éñ„É©„Ç¶„Ç∂ÁâàChatGPTÔºàchatgpt.comÔºâ„Å®„ÅÆËá™ÂæãÂØæË©±„ÄÇCDPÁµåÁî±„ÅßÊìç‰Ωú„ÄÇ

```powershell
# Âü∫Êú¨ÂÆüË°åpython .agent\workflows\desktop\scripts\goal_driven_consultation.py \
    --mode single --question "Ë≥™ÂïèÂÜÖÂÆπ"
```

| È†ÖÁõÆ | ÂèÇÁÖßÂÖà |
|:-----|:-------|
| „É≠„Ç∞„Ç§„É≥‰øùÊåÅ | [SKILL.md#„É≠„Ç∞„Ç§„É≥‰øùÊåÅ](../desktop-chatgpt/SKILL.md#-„É≠„Ç∞„Ç§„É≥‰øùÊåÅ) |
| ÈÄÅ‰ø°„É´„Éº„É´ | [SKILL.md#ÈÄÅ‰ø°„É´„Éº„É´](../desktop-chatgpt/SKILL.md#-ÈÄÅ‰ø°„É´„Éº„É´) |
| ÂÆå‰∫ÜÂà§ÂÆö | [SKILL.md#ÂÆå‰∫ÜÂà§ÂÆö](../desktop-chatgpt/SKILL.md#-ÂÆå‰∫ÜÂà§ÂÆö) |
| „Ç®„É©„ÉºÊ§úÂá∫ | [SKILL.md#„Ç®„É©„ÉºÊ§úÂá∫](../desktop-chatgpt/SKILL.md#-„Ç®„É©„ÉºÊ§úÂá∫) |




## üì∏ SSÁ¢∫Ë™ç„É´„Éº„É´

| Áä∂Ê≥Å | SS‰ΩøÁî® | 
|------|--------|
| Êìç‰ΩúÂÆå‰∫ÜÁ¢∫Ë™ç | ‚≠ï ÂøÖÈ†à |
| ÂÆå‰∫ÜÂæå„ÅÆÁµêÊûúÁ¢∫Ë™ç | ‚≠ï 1ÂõûÔºàÂøµ„ÅÆ„Åü„ÇÅÔºâ |
| ÂõûÁ≠îÂèñÂæó | ‚ùå DOM„Åã„ÇâÂèñÂæó |
| „Ç®„É©„ÉºÊôÇ | ‚≠ï „Éá„Éê„ÉÉ„Ç∞Áî® |


## üìã Ë®≠Ë®à„Éù„É™„Ç∑„ÉºÔºà3„Å§„ÅÆÊü±Ôºâ

### 1. Risk/ÊâøË™ç„Éù„É™„Ç∑„Éº

**ÊñπÈáù**: Êù°‰ª∂‰ªò„ÅçËá™ÂãïÔºàÂü∫Êú¨Ëá™Âãï„ÄÅÂç±Èô∫Êìç‰Ωú„ÅÆ„ÅøÊâøË™çÔºâ

| „Ç´„ÉÜ„Ç¥„É™ | ‰æã | ÊâøË™ç |
|:---------|:---|:----:|
| **Ëá™ÂãïOK** | Ê§úÁ¥¢„ÄÅÈñ≤Ë¶ß„ÄÅ„Çπ„ÇØ„É≠„Éº„É´„ÄÅ„Çø„ÉñÊìç‰Ωú | ‚ùå ‰∏çË¶Å |
| **Êù°‰ª∂‰ªò„Åç** | PIIÊ§úÁü•ÊôÇ„ÄÅÊñ∞Ë¶è„Éâ„É°„Ç§„É≥„ÄÅÂàùÂõû„É≠„Ç∞„Ç§„É≥ | ‚ö†Ô∏è ÊòáÊ†º |
| **Â∏∏„Å´ÊâøË™ç** | ÈÄÅ‰ø°/ÊäïÁ®ø/ÂÖ¨Èñã„ÄÅ„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„ÄÅË≥ºÂÖ•„ÄÅÂâäÈô§ | ‚≠ï ÂøÖÈ†à |

**PIIÊ§úÁü•ÊôÇ„ÅÆÂãï‰Ωú**: Google„É≠„Ç∞„Ç§„É≥„Åè„Çâ„ÅÑ„ÅØËá™ÂãïOK„ÄÅ„Åù„Çå‰ª•Â§ñ„ÅØÊâøË™ç„Å´ÊòáÊ†º

**AllowlistÔºàËá™ÂãïOKÔºâ**: `chatgpt.com`, `perplexity.ai`, `google.com`
**DenylistÔºàÁ¶ÅÊ≠¢Ôºâ**: ÈäÄË°å„ÄÅË°åÊîø„ÄÅÂåªÁôÇ„Éù„Éº„Çø„É´

### 2. Verify„ÅÆÂé≥ÂØÜ„Åï

| „É¨„Éô„É´ | ÂÜÖÂÆπ | Áî®ÈÄî |
|:-------|:-----|:-----|
| **V1** | UIÁä∂ÊÖãOK | Êé¢Á¥¢„Éª‰∏ãË™ø„Åπ |
| **V2** | ÊàêÊûúÁâ©‰∏ÄËá¥ÔºàÊ©üÊ¢∞„ÉÅ„Çß„ÉÉ„ÇØÔºâ | **Êó¢ÂÆö** |
| **V3** | ‰∫∫Á¢∫Ë™ç | È´ò„Çπ„ÉÜ„Éº„ÇØÔºàÊ≥ïÂãô/ÂåªÁôÇ/ÊäïË≥áÔºâ |

**Êó¢ÂÆöVerify**: V2ÔºàÊàêÊûúÁâ©„ÉÅ„Çß„ÉÉ„ÇØÔºâ

### 3. ObservationÊúÄÂ∞è„Çπ„Ç≠„Éº„Éû

```json
{
  "ts": "ISOÊôÇÂàª",
  "step_id": "ÊâãÈ†ÜID",
  "context": { "app": "browser", "window_title": "...", "url": "..." },
  "intent": "source_find | claim_verify | send_message",
  "artifact": { "text": "ÊäúÁ≤ãÔºà100ÊñáÂ≠ó‰ª•ÂÜÖÔºâ", "evidence_ref": "screenshot:ID" },
  "quality": { "confidence": 0.78 },
  "status": "ok | partial | error",
  "risk_flags": ["external_send_candidate", "pii_detected"]
}
```

## üìÅ „É≠„Ç∞Ë®≠ÂÆö

| È†ÖÁõÆ | ÂÄ§ |
|:-----|:---|
| **‰øùÂ≠òÂÖà** | Êó¢ÂÆö: `_outputs/desktop`ÔºàÁí∞Â¢ÉÂ§âÊï∞„Åß‰∏äÊõ∏„ÅçÂèØÔºâ |
| **‰øùÊåÅÊúüÈñì** | 30Êó• |
| **ÂΩ¢Âºè** | JSON Lines (`.jsonl`) |
| **„Çπ„ÇØ„Ç∑„Éß** | Âç±Èô∫Êìç‰ΩúÂâç„ÅÆ„Åø‰øùÂ≠ò |

```python
# runtime pathÔºàÁí∞Â¢ÉÂ§âÊï∞ > Êó¢ÂÆöÂÄ§Ôºâ# AG_DESKTOP_BASE_DIR# AG_DESKTOP_SCREENSHOT_DIR# AG_DESKTOP_TEMPLATE_STORE_PATHfrom core.runtime_paths import get_desktop_base_dir
LOG_DIR = get_desktop_base_dir() / "logs"
LOG_RETENTION_DAYS = 30
```

## üìö KI LearningÁµ±ÂêàÔºàv5.2.2Ôºâ

> [!IMPORTANT]
> **Â§±Êïó/ÊàêÂäü„ÇíËá™ÂãïË®òÈå≤„Åó„ÄÅÂêå„ÅòÂ§±Êïó„ÇíÁπ∞„ÇäËøî„Åï„Å™„ÅÑ„ÄÇ**

### ÂÖ±ÈÄö„Éï„ÉÉ„ÇØ„É¢„Ç∏„É•„Éº„É´

`ki_learning_hook`Ôºà`.agent/workflows/shared/`Ôºâ„Çí‰ΩøÁî®Ôºö

```python
# ÂÆâÂÆö„Åó„Åü„Ç§„É≥„Éù„Éº„ÉàÔºàÁí∞Â¢ÉÂ§âÊï∞ > „Éá„Éï„Ç©„É´„Éà„Éë„Çπ > Null ClientÔºâimport sys
from pathlib import Path
sys.path.insert(0, str(Path('.agent/workflows/shared')))
from ki_learning_hook import report_action_outcome, check_risks, get_best_locators
```

### Ë®òÈå≤„Çø„Ç§„Éü„É≥„Ç∞

| „Ç§„Éô„É≥„Éà | Outcome | Ë®òÈå≤„Åô„ÇãÊÉÖÂ†± |
|:---------|:--------|:-------------|
| Êìç‰ΩúÊàêÂäü | SUCCESS | intent_class, locator, latency_ms |
| Êìç‰ΩúÂ§±Êïó | FAILURE | root_cause, error_type, fix |
| ÈÉ®ÂàÜÊàêÂäü | PARTIAL | ÊàêÂäü„Åó„ÅüÈÉ®ÂàÜ„Å®Êú™ÈÅî„ÅÆÈÉ®ÂàÜ |

### ‰ΩøÁî®‰æã

```python
# Êìç‰ΩúÂâçÔºö„É™„Çπ„ÇØÂèÇÁÖßrisks = check_risks('/desktop', 'click_send', signature_key)
if risks and risks[0].get('level') == 'HIGH':
    # È´ò„É™„Çπ„ÇØ ‚Üí ‰ª£ÊõøÊâãÊÆµ„ÇíÊ§úË®é
    pass

# Êìç‰ΩúÂæåÔºöÁµêÊûúË®òÈå≤report_action_outcome(
    agent='/desktop',
    intent_class='click_send',
    outcome='SUCCESS',
    latency_ms=150,
    signature_key=signature_key
)
```

## üí° Rules

- **Á¶ÅÊ≠¢‰∫ãÈ†Ö„ÇíÂÆà„Çã**Ôºàbrowser_subagentÁ¶ÅÊ≠¢Ôºâ
- **SSÁ¢∫Ë™ç„ÇíÁúÅÁï•„Åó„Å™„ÅÑ**
- **ÂÆå‰∫ÜÂ†±ÂëäÂâç„Å´ÂøÖ„ÅöÁµêÊûúÁ¢∫Ë™ç**
- **CDPÊúÄÂÑ™ÂÖà„ÄÅLayer 2+„ÅßÊìç‰Ωú**
- **Â§±Êïó/ÊàêÂäü„ÇíË®òÈå≤**ÔºàKI LearningÈÄ£Êê∫Ôºâ
- **Language**: Êó•Êú¨Ë™û„ÅßÂ†±Âëä

---

> üìö **ÊäÄË°ìË©≥Á¥∞Ôºà„Ç≥„Éº„Éâ‰æã„Éª„É¢„Ç∏„É•„Éº„É´‰∏ÄË¶ßÁ≠âÔºâ**: [README.md](./README.md) „ÇíÂèÇÁÖß
>
> ‚ö†Ô∏è **ÊäÄË°ìË©≥Á¥∞„ÇíÂ§âÊõ¥„ÉªËøΩÂä†„Åó„ÅüÂ†¥Âêà„ÅØ„ÄÅREADME.md„Å´„ÇÇÂøÖ„ÅöÂèçÊò†„Åô„Çã„Åì„Å®„ÄÇ**


##  „É≠„Ç∞Ë®òÈå≤ÔºàWorkflowLoggerÁµ±ÂêàÔºâ

> [!IMPORTANT]
> ÂÆüË°åÊôÇ„ÅØÂøÖ„ÅöWorkflowLogger„ÅßÂêÑ„Éï„Çß„Éº„Ç∫„Çí„É≠„Ç∞Ë®òÈå≤„Åô„Çã„Åì„Å®„ÄÇ
> Ë©≥Á¥∞: [WORKFLOW_LOGGING.md](../shared/WORKFLOW_LOGGING.md)

`python
import sys; sys.path.insert(0, '.agent/workflows/shared')
from workflow_logging_hook import logged_main, phase_scope
`

„É≠„Ç∞‰øùÂ≠òÂÖà: `_logs/autonomy/{agent}/{YYYYMMDD}/`
